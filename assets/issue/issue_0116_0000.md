# Issue: 이미지 업로드 실패 및 해결 (Compression & Notification)
**작성일시:** 2026-01-16 00:00
**상태:** 해결 완료 (프론트엔드 압축 적용)

## 📌 발생 문제 (Problem)
`multipart/form-data` 적용 후에도 이미지 업로드가 실패함.

### 원인 분석 (Root Cause Analysis)
1.  **API 명세 불일치**: `assets/text/database_setting.md` 재검토 결과, 백엔드 API (`POST /posts/`)는 `Request Body`로 **JSON** 포맷을 요구하며, `image_url` 필드에 **String URL**을 입력받도록 설계되어 있음.
2.  **Multipart 미지원**: 백엔드가 `multipart/form-data`를 처리하는 엔드포인트가 아님. 따라서 이전 시도(Multipart 전송)는 400/415 에러 등을 유발했을 것임.
3.  **Base64 용량 제한**: 초기 Base64 전송 방식은 페이로드 크기가 너무 커서(수 MB) 서버(Render/Nginx)의 Body Size Limit에 걸림.

## 🛠️ 해결 과정 (Solution)
백엔드 수정 없이 프론트엔드에서 해결하는 방식으로 선회함.

### 1. 이미지 압축 (Client-side Compression)
-   `src/utils/imageCompression.js` 유틸리티 생성.
-   **Canvas API**를 사용하여 이미지를 리사이징(Max Width 800px) 및 압축(Quality 0.6) 후 Base64로 변환.
-   결과적으로 수 MB 이미지를 수십 KB 수준으로 줄여 JSON 페이로드에 포함 가능하게 함.

### 2. 알림 기능 추가 (Notification)
-   업로드 성공 시 사용자가 인지할 수 있도록 `NotificationPanel`에 알림 추가 로직 구현.
-   `App.jsx`에 `notifications` 상태 추가.

## 📝 결과 (Result)
-   이미지 선택 -> 압축 -> JSON 전송 -> 업로드 성공.
-   성공 시 우측 상단 알림 패널이 열리며 "업로드 완료" 메시지 표시.
